{% extends "base.html" %}

{% block title %}All Dilemmas - VALUES.md{% endblock %}

{% block content %}
<div class="stats">
    <div class="stat-card">
        <div class="stat-value">{{ count }}</div>
        <div class="stat-label">Total Dilemmas</div>
    </div>
</div>

{% if dilemmas %}
    {% for dilemma in dilemmas %}
    <div class="card">
        <h2>
            <a href="/dilemma/{{ dilemma.id }}">{{ dilemma.title }}</a>
        </h2>

        <div style="margin: 15px 0;">
            <span class="badge badge-difficulty">
                Difficulty {{ dilemma.difficulty_intended }}/10
            </span>
            {% if dilemma.seed_components and dilemma.seed_components.domain %}
            <span class="badge badge-domain">
                {{ dilemma.seed_components.domain.replace('_', ' ').title() }}
            </span>
            {% endif %}
            <span class="badge" style="background: #fff3e0; color: #e65100;">
                {{ dilemma.choices|length }} choices
            </span>
        </div>

        {% if dilemma.tags %}
        <div style="margin: 10px 0;">
            {% for tag in dilemma.tags[:5] %}
            <span class="badge badge-tag">{{ tag }}</span>
            {% endfor %}
            {% if dilemma.tags|length > 5 %}
            <span class="badge badge-tag">+{{ dilemma.tags|length - 5 }} more</span>
            {% endif %}
        </div>
        {% endif %}

        <div class="meta">
            Generated by <strong>{{ dilemma.generator_model or 'Unknown' }}</strong>
            {% if dilemma.generator_prompt_version %}
                using {{ dilemma.generator_prompt_version }}
            {% endif %}
            â€¢ {{ dilemma.created_at.strftime('%Y-%m-%d %H:%M') }}
        </div>
    </div>
    {% endfor %}
{% else %}
    <div class="empty-state">
        <h2>No dilemmas yet</h2>
        <p>Run <code>uv run python scripts/generate_batch.py 10</code> to generate some dilemmas.</p>
    </div>
{% endif %}
{% endblock %}
